apply plugin: 'java'
apply plugin: 'war'

repositories {
    jcenter()
}

task deploy(dependsOn: 'war', type:Exec) {
    workingDir "${glassfishHome}${File.separator}bin"

    if (System.properties['os.name'].toLowerCase().contains('windows')) {
        commandLine 'cmd', '/c', 'asadmin.bat'
    } else {
        commandLine "./asadmin"
    }

    args "deploy", "--force=true", "${war.archivePath}"
}

dependencies {
    testCompile group: 'org.testng', name: 'testng', version: '6.9.10'
}

war {
    from 'WebContent'
}